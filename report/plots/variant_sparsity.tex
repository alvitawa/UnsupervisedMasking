% arara: pdflatex
\documentclass[12pt]{standalone}

\usepackage{tikz,pgf} %and any other packages or tikzlibraries your picture needs
\usepackage{pgfplots}
\usepackage{pgfplotstable}
\pgfplotsset{compat = newest}

\begin{document}

% https://latexdraw.com/plot-a-function-and-data-in-latex/
\pgfplotstableread{plot_data/variant_sparsity.csv}{\table}
\pgfplotstableread{plot_data/variant_sparsity_free.csv}{\tablefree}

\begin{tikzpicture}
    \begin{axis}[
        title={Accuracy as the prune rate linearly increases during trainig},
        xlabel={\% of active weights},
        ylabel={Accuracy},
        x dir=reverse,
        xmin = 0, xmax = 0.91,
        ymin = 0, ymax = 1,
        xtick distance = 0.1,
        ytick distance = 0.1,
        xticklabel={\pgfmathparse{\tick*100}\pgfmathprintnumber{\pgfmathresult}\%},
        grid = both,
        minor tick num = 1,
        major grid style = {lightgray},
        minor grid style = {lightgray!25},
        width = \textwidth,
        height = 0.75\textwidth,
        legend cell align = {left},
        legend pos = south west,
        scatter/classes={%
            resnet18={mark=triangle,draw=blue},
            ssl_resnet18={mark=triangle,draw=red},
            skresnet18={mark=triangle,draw=teal}},
        ]
    ]

        \addplot[blue] table [x = sparsity, y = {resnet18}] {\table};

        \addplot[red] table [x = sparsity, y = {ssl_resnet18}] {\table};

        \addplot[teal] table [x = sparsity, y = {skresnet18}] {\table};

        \addplot+[scatter,only marks,scatter src=explicit symbolic] table [meta=model, x=sparsity, y=acc] {\tablefree};

        \legend{
            ResNet18,
            SSL-ResNet18,
            SK-ResNet18,
            Free-ResNet18,
            Free-SSL-ResNet18,
            Free-SK-ResNet18
        }

    \end{axis}

\end{tikzpicture}

\end{document}
